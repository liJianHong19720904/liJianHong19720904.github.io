<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Web Programming with language...</title>
  <link1 rel = "stylesheet" type="text/css" href="home.css">
  <style type="text/css">
	/*** Web font 为本页增加2种英文字体，每种字体再提供2类字体文件地下载 ***/
@font-face {
    font-family: 'ciclefina';
    src: url('images/cicle-webfont.woff') format('woff'),
         url('images/ciclefina-webfont.svg') format('svg');
    font-weight: normal;
    font-style: normal;
}
@font-face {
    font-family: 'zantroke';
    src: url('images/zantroke-webfont.woff') format('woff'),
         url('images/zantroke-webfont.svg') format('svg');
    font-weight: normal;
    font-style: normal;
} 

/***为所有元素设定border-box的属性，让各盒装模型元素统一宽和高的计算方法，并清除所有盒装模型元素的默认margin 值。**/
    *{
	margin:0 ;
	box-sizing:border-box;
 /*	基础font-size 属性的大小在页面打开时，由用户端的window.innerWidth属性决定*/
		}

	html{
	 font-family:"宋体";
		}
	header{
	position: relative;
	font-family: 'zantroke','黑体';
	height:150px;
	background:url("images/header.jpg") no-repeat center ;
	color:white;
    text-align:center;
	
	}
	header>h1{
	 margin:0 auto;
	 color:white ;
	 padding-top:20px;
	 font-size:1.6em;
	 text-shadow:blue 3px 2px ;
	}

	header nav{
	padding-top:0.5em;
	margin:0 auto;
	font-size: 1.8em;
	}
    header nav input{
	 font-size: 0.8em;
	 border:3px outset   ;
	 background-color:rgb(0,50,0);
	 border-radius: 30% ;
	 padding: 0.1em ;
	 color:rgb(255,255,255) ;
	 cursor: pointer;
	 }
     header nav input:hover{
	  background-color:rgb(0,200,100);
	 }
	 header nav input:active{
	   border:3px  inset  ;
	   background-color:rgb(0,0,100);
	   color:rgb(255,255,255) ;
	 }
     header input#lessonId{
	   text-align:center;
	   font-size: 1.2em;
	   width:3em;
	   color:rgb(255,255,255);
	   text-shadow:2px 2px rgb(0,50,250);
	 }


  @media screen and (min-width:800px){
   html{
   background-color:rgb(200,230,200);
   }
   body{width:800px;
   margin:0 auto ;}
   }/*end of media screen @ min-width:700px */

  @media screen and (max-width:800px){
  
  }
	article{
	 font-family: 'ciclefina' , '黑体';
	 border:1px solid rgb(50,150,50);
	 padding:5px;
	 text-align:justify;
	 line-height:1.6;
     color:rgb(0,0,50) ;
	 background-color:rgb(200,220,200);
	 font-size:1.2em;
	 
	}

  	article#chapter3,article#chapter5{
	  background-color:rgb(20,50,0);
	  color:rgb(250,250,250) ;
	  	   	}
    article#chapter3{
		font-family: 'ciclefina','黑体';
		font-size: 1.5em;
			}
	article#chapter5{
		font-family: 'ciclefina','仿宋';
		font-size: 1.3em;
			}
    article p{
     text-indent: 2em;
	 line-height:2em;
	 }
	 /*b用于实现本节关键字输出*/
  	article  b{
	  font-family: '黑体';
	  font-weight: bolder ;
	  color:rgb(230,0,0) ;
	  text-shadow: rgb(200,200,0) 1px 0.5px ;
	  margin-right:1em;
	  display: block ;
	     	 	   	} 

	article#chapter4 input{
	 color:rgb(120,0,0);
     font-size:1.1em;
	 margin-right:1em;
	 cursor:pointer;
	 border:outset;
	}
	article#chapter4 input:hover{
	 background-color:rgb(222,222,220);
	 border:inset;
	}

	footer{
	font-family: 'zantroke';
	background-color:rgb(0,50,0);
	color:white;
	font-size:1.2em;
	text-align:center;
	height:50px;
	padding-top:15px;
	}
	div#tips{
	 position:absolute;
	 width:350px;
	 left:45%;
	 top:5%;
	 display:none;
	}

	div#tips p{
	position:relative;
	text-shadow: rgb(250,0,0) 1px 0.5px ;
    color:white;
	display:inline;
	font-size:20px;
	top:-30px;
	left:-50px;
	}
	input#homework{
     font-size: 15px;
	 position: absolute;
	 left:10px;bottom:5px;
	 padding:5px 10px;
	}
	input#showwork{
	font-size: 15px;
	 position: absolute;
     right:10px;bottom:5px;
	 padding:5px 10px;
	}
  </style>
  <script>
   var ajaxObj = {
    content: [] ,
	xhrReq : function(url){
		this.content = [] ;
     	var theText = "" ;
    	var xhr = new XMLHttpRequest();
	     xhr.onreadystatechange = myCallback ;
	     console.time('AjaxTime');
	     xhr.open('GET',url,true);
	     xhr.send('');
     function myCallback(){
// myCallback函数将执行四次，因此本语句会被执行4次,对应xhr 的onreadystatechange的事件发生，xhr的属性readyState也会变化4次
	  console.log("Ajax state changed : "+ xhr.readyState);
	  if (xhr.readyState ===0 ){
		  console.log("Ajax is uninitialized.");
          console.timeEnd("AjaxTime");
		  return ;
	  }
	  if (xhr.readyState === 1 ){
		  console.log("Ajax beign Loading...");
          console.timeEnd("AjaxTime");
		  console.time('AjaxTime');
		  return ;
	  } 
	  if (xhr.readyState === 2 ){
		  console.log("Ajax has Loaded .");
          console.timeEnd("AjaxTime");
		  console.time('AjaxTime');
		  return ;
	  } 
	  if (xhr.readyState === 3 ){
		  console.log("Ajax can be interactive .");
          console.timeEnd("AjaxTime");
		  console.time('AjaxTime');
		  return ;
	  } 
	  if (xhr.readyState === 4 ){
		  console.log("Ajax is complete .");
          console.timeEnd("AjaxTime");
		  if (xhr.status !== 200){
			  console.log("Get text file from Server failed ! ");
			  return ;
		  }else{
		       theText = xhr.responseText ;
			   let i = 1;
			   let begin = theText.search("chapter 1") +"chapter 1".length;
			   let end = theText.search("chapter "+(i+1)) ;
			   let arr = [];
			   while (end !== -1){
				  arr[i-1] = theText.substring(begin+1,end); //begin+1 因为chapter i后有回车键,在此不需要
				  i++ ;
			     begin = end +("chapter "+i).length;
			     end = theText.search("chapter "+(i+1)) ;
			   }
			   arr[i-1] = theText.substring(begin+1);//begin+1 因为chapter i后有回车键,在此不需要
			   //theText = arr ;
               ajaxObj.content = arr;//全局变量ajaxObj
			} // success of GET TXT
	       }//readyState === 4
		 }//end of myCallback	     
	}//end of xhrReq methoed
   };//end of ajaxObj definition
  /****
  上面ajax读取的文本与下面的用户UI匹配，下面的UI方法也以chapter i分隔 
  chapter 1指标题区  chapter 2指目标区   chapter 3指关键字区   chapter 4指案例下载区   chapter 5指拓展阅读区
  ***/
   var outputUI = {
    showChapter1:function(){
	  my$("#chapter1").textContent = ajaxObj.content[0];
	} ,
    showChapter2and3:function(){
	  my$("#chapter2").textContent = "";
      var paraTxt = ajaxObj.content[1];
      let p = document.createElement("p"); 
      let b = document.createElement("b");
	  let t = document.createTextNode(paraTxt);
      b.textContent =  "教学目标 : ";
	  my$("#chapter2").appendChild(b);
      p.appendChild(t);
	  my$("#chapter2").appendChild(p);
	  my$("#chapter3").textContent = "";
      var paraTxt = ajaxObj.content[2];
      let p1 = document.createElement("p"); 
      let b1 = document.createElement("b");
	  let t1 = document.createTextNode(paraTxt);
      b1.textContent =  "KeyWords : ";
	  p1.appendChild(t1);
	  my$("#chapter3").appendChild(b1);
	  my$("#chapter3").appendChild(p1);
	} ,
	showChapter4:function(){
	  my$("#chapter4").textContent = "";
      var paras = ajaxObj.content[3].split("\n");
	  if(paras[paras.length -1]==""){paras.pop();}
	  if(paras[0]==""){ paras.shift(); }//在vsCode和gitHub传回的Ajax文本，ajaxObj.content[3]最前面有一个空行，paras前面会多一个空字符
      for (var i=0; i< paras.length; i++ ){
          let b = document.createElement("b");
		  let p = document.createElement("p");
          var no;
		  if (i < 9){
			  no = "0" + (i+1) ;
		  }else{
			  no = i+1 ;
		  }
		  b.textContent =  "实践案例"+no +":";
		  my$("#chapter4").appendChild(b);

          let bt = document.createElement("input");
		  bt.type = "button" ; bt.id = no ;
		  bt.value = "案例文件包: " + no +".zip";
		  bt.onclick = function(){
		   var url = Model.getUrlPath() + (this.id) + ".zip" ;
		   window.open(url);
		  };
		  
          let txt = document.createTextNode(i+":"+paras[i]);
		   p.appendChild(bt);
		   p.appendChild(txt); 
		  my$("#chapter4").appendChild(p);
			}//end for loop

	} ,
	showChapter5:function(){
	  my$("#chapter5").textContent = "" ;
      var paras = ajaxObj.content[4].split("\n");
	  if(paras[paras.length -1]==""){paras.pop();}
	  if(paras[0]==""){ paras.shift(); }
	     for (var i=0; i< paras.length; i++ ){
          let p = document.createElement("p");
		  let b = document.createElement("b");
          var no;
		  if (i < 9){
			  no = "0" + (i+1) ;
		  }
		  b.textContent =  "拓展阅读 "+(i+1) +":";
		  my$("#chapter5").appendChild(b);
          let txt = document.createTextNode(paras[i]);
		  p.appendChild(txt); 
          my$("#chapter5").appendChild(p);
			}//end for loop
	} ,
	showAll: function(){
		      var that = this ;
			  setTimeout(that.showChapter1,300) ;
              setTimeout(that.showChapter2and3,300*2) ;
	          setTimeout(that.showChapter4,300*3) ;
              setTimeout(that.showChapter5,300*4) ;

			 
			}
   };//end of UI

  var Model = {
	 maxId : 17 ,
     lessonId : 1 ,
	 getTextFile : function(){
       if (this.lessonId < 10){
		   return 'lessons/kc0' + this.lessonId + ".txt" ;
       }else{
	       return 'lessons/kc' + this.lessonId + ".txt" ;
	   }
	 },
     getUrlPath : function(){
       if (this.lessonId < 10){
		   return 'lessons/kc0' + this.lessonId + "/" ;
       }else{
	       return 'lessons/kc' + this.lessonId + "/" ;
	   }
	 },
	 getLessonById: function(){
	 var txtFile = Model.getTextFile();
      ajaxObj.xhrReq(txtFile);
	  my$("h1#chapter1").textContent = "好 ！正 在 载 入 信 息 ..." ;

      setTimeout(function(){
		     if (ajaxObj.content.length > 1){
               outputUI.showAll();
		     }else{
			   setTimeout(function(){outputUI.showAll();},1000);
			 }
       },600);

	   showTips();
			  function showTips(){
                var tips = my$("#tips") ;
				    tips.style.display = "block" ;
                    setTimeout(function(){
						tips.style.display = "none" ;
					},1000*1.6)
					//var x= 0 ;
					//var y= 0 ;
					//tips.style.left = x + "px" ;
                    //tips.style.top = y + "px" ;
			  }
     }//Model getLessonById method
  };//End Model Object
   window.onload = function(){
  //动态控制UI，包括：针对不同屏幕的字体大小设置，主区域的高度设置
    var fontSize =  Math.floor(window.innerWidth/100) ;
  	//alert("window.innerWidth:"+window.innerWidth);
  	switch (fontSize){
     case 17 :	 case 16 :	 case 15 : 
       fontSize =  fontSize*1.2; break;
  	 case 14 :	 case 13 : 	 case 12 :
  	 case 11 : fontSize =  fontSize*1.3; break;
     case 10 : fontSize =  fontSize*1.5 ; break;
     case 9 :  fontSize =  fontSize*1.7; break;
     case 8 :  fontSize =  fontSize*2.0; break;
     case 7 :  fontSize =  fontSize*2.3 ; break;
     case 6 :  fontSize =  fontSize*2.4 ; break;
     case 5 :  fontSize =  fontSize*2.6 ; break;
     case 4 :  fontSize =  fontSize*3.3 ; break;
  	 default : fontSize =  fontSize*3.8 ; break;
  	}
  	document.body.style.fontSize = fontSize + "px" ;
   
 
  //下面使用ajaxObj.xhrReq("kc01.txt")让第一课的内容页面准备好后，当用户点击输入框后，大概率访问第一课，则无需再作ajax访问
   ajaxObj.xhrReq("lessons/kc01.txt");
 
   my$("input#lessonId").onclick = function(){
     this.value = 1 ;
	 outputUI.showAll();
     };

   my$("input#lessonId").addEventListener("change",function(){
	   //console.log(this.value);
       var lessonId =  parseInt(this.value) ;
	   if (!lessonId || lessonId < 1 || lessonId > Model.maxId) {
         this.value = 1 ;
         Model.lessonId = 1 ;
	   }else{//end of 输入错误
	     Model.lessonId = parseInt(this.value) ;
	   }
        Model.getLessonById();
      },true);
   
   
   my$("input#next").addEventListener("click",function(){
	   //console.log(lessonId.value);
    my$("input#lessonId").onclick = function(){
    };
	 var lessonIdDom = my$("input#lessonId") ;
	 if (!parseInt(lessonIdDom.value)){
      lessonIdDom.value = 1 ;
	 }
	 Model.lessonId =  parseInt(lessonIdDom.value) +1;
	 if (Model.lessonId > Model.maxId){
       Model.lessonId = 1 ;
	 }
	 lessonIdDom.value = Model.lessonId ;
     Model.getLessonById();
    }
	 ,true);

   my$("input#prev").addEventListener("click",function(){
     my$("input#lessonId").onclick = function(){};
	 var lessonIdDom = my$("input#lessonId") ;
	 if (!parseInt(lessonIdDom.value)){
      lessonIdDom.value = 1 ;
	 }
	 Model.lessonId =  parseInt(lessonIdDom.value) -1 ;
	 if (Model.lessonId < 1){
       Model.lessonId = Model.maxId ;
	 }
	 lessonIdDom.value = Model.lessonId ;
    
	 Model.getLessonById();
   },true);

   my$("input#homework").onclick = function(){
    var url = "cs2021/index.html" ;
    window.open(url);
   };
   my$("input#showwork").onclick = function(){
    const MAX = 10 ;
	var rand = Math.floor(Math.random()*MAX) ;
    var url = "showExps/exp" + rand +".html";
	window.open(url);
   };
  };//end of window.onload
  function my$(para){
  	if(!para){
  	  throw para + " : wrong Selector para,you get nothing !" ;
  	}
   var dom = document.querySelectorAll(para) ;
   if (dom.length > 1){
  	   console.log("you get Dom Array list reference.");
  	   return dom ;
   }else{
     dom = document.querySelector(para) ;
  	 if (dom){
       console.log("you get a Dom reference.");
       return dom ;
  	 }else{
  	   throw para + " : wrong Selector para,you get nothing !" ;
  	 }
   }
  }//end of my$
  </script>
 </head>
 <body>
  <header> 
   <h1 id="chapter1">《Web Programming Basic 》<br>教学指导和实践案例集 </h1>  
   <nav>
    <input type="button" id="prev"  value=" 向前翻 ">
	 第 <input type="text" id="lessonId"  value="简介"> 篇
	<input type="button" id="next" value=" 向后翻 ">
	<input type="button" id="homework" value="学生作业">
	<input type="button" id="showwork" value="随机案例">
   </nav>
  </header>
  <section>
    <article id = "chapter2">
     <b>目标：</b>
       <p>
欢迎来到《Web程序设计基础》课程网站，本站为这门课程的教学提供一些实践案例和理论指导。
       </p>
       <p>
本站一共包含17个教学篇，每个教学篇包含若干教学案例和理论知识要点。在进入指定教学内容后，本区域会列出相应的教学目标，而能理解代码和动手编程是我们的教学重点。本站的17个教学篇承前启后，学习者理解和编程能力需要逐步搭建，一般在学生达到前面的教学目标后，才可实施后面的教学内容。
	   </p>
	 	</article>
	<article id = "chapter3">
     <b>关键词： </b>
   	   <p>
学习者在Web程序设计学习中，将尝试三种不同层次的计算机语言，即HTML、CSS、JavaScript三大Web开发的核心基础，而对于初学者而言，理解Web的这些语言的前提是关注代码中的英文关键词，再配合计算机知识和数理逻辑，通过动手编码加强实践，在学习的过程中也可体验到精彩纷呈的Web编程世界。
       </p>
   	   <p>
进入指定教学篇后，本区域会列出案例代码使用的关键英文单词，学习者先把这些英文字面意义弄清楚，能在键盘上敲出来，尽快渡过初学者都要经历的代码英文拼写错误的“困难时期”。 
	   </p>
	</article>
	<article id = "chapter4">
      <b>案例集区：</b>
	  <p> 
对于没有程序学习经验的初学者，对于后面篇章的一些案例会感觉比较难，需要配合教师讲解。在实际教学中，应根据学生情况，每个教学篇可对应安排2-4节课的课堂演示讲解和理论教学。
	   </p>
	   <p> 
除了课堂教学，建议再配合相当的实践教学，必须让学生动手编写代码，模仿和改进案例。在案例教学中，学生亲手敲出案例的代码并让代码运行，是学习本课程的基本态度，复制粘贴代码是没有意义的。当然有编程经验的学生也会感觉学习轻松，则可按自己的需要修改案例、创作自己的案例。
	   </p>
	   <p> 
进入指定教学内容后，本区域会列出本次教学篇的案例集，每个案例集都打包为zip格式，下载到本地解包后的会产生若干案例文件，每个案例文件都可以用PC或手机打开查看案例效果，使用PC端的浏览器可查看源代码，并调试学习案例。
	  </p>
    </article>
	<article id = "chapter5">
	   <b>拓展阅读区：</b>
	   <p>
本课程教学强调“基于编程实践的理论阅读”，学习者首先通过编码案例，要亲手实践、亲自理解，再配合阅读经典的文字来理解理论。系统地理解理论知识对学习者的编码能力和综合能力提高至关重要。
	   </p>
       <p>
进入指定教学内容后，本区域会列出与本次教学相关的概念阐述和理论总结，本站有意优化了移动端的文字阅读效果，课堂上可以让学生打开手机，阅读和朗读这里的经典文字阐述。
	   </p>
        <p>
本站的教学流程和模式总结为：1、了解学习目标 ；2、熟悉理解英文 ；3、案例讲解和实践； 4、基于实践的拓展阅读和理论提升； 5、学习者的编程能力上升，进入下一篇的新目标， 。
	   </p>

    </article>
  </section>
  <footer id = "statusInfo">
    Code By Mr Lijianhong of JXSTNU  on 2022
  </footer>
  <div id="tips">
	<img src="images/kcBird.gif" alt="笨鸟先飞">
	
  </div>
 </body>
</html>
