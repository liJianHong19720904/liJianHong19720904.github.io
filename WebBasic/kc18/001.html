<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    通过前面对抽象函数建立的概念，本课开始，我们在可以用函数来处理人类最为重要的信息---文本信息了。
    初学者可以这样构想：我们可以大胆地精心设计的一个个基础性功能代码，利用函数包装起来，供我们未来处理文字信息的代码调用，就像构建一个一个质量合格地零件，通过这些零件，再组装成更强大的部分，最终把功能强大的软件搭建起来。
    定义一个分析字符串最基本的函数，search(s , ch) ，利用这个函数，我们可以得到字符ch在字符串s 的索引位置。
    本例我们创造另一个基本函数，function lengthOfArray(arr)，用来返回数组或字符串的长度。

  </title>
  <link rel = "stylesheet" type="text/css" href="../images/myCss.css">
  <script src="../images/myJs.js"></script>

 
 </head>

 <body>
  
  <header>
   JavaScript的输出
  </header>

  
  <article>
    
	<strong> 字符串和函数 </strong>
	<img src="../images/girl2.jpg">
  </article>
  <footer>
    Box-Model & Float & Position  By Li CopyRight 2022
  </footer>
  
  <script>

  //通过前面对抽象函数建立的概念，本课开始，我们在可以用函数来处理人类最为重要的信息---文本信息了。初学者可以这样构想：我们可以大胆地精心设计的一个个基础性功能代码，利用函数包装起来，供我们未来处理文字信息的代码调用，就像构建一个一个质量合格地零件，通过这些零件，再组装成更强大的部分，最终把功能强大的软件搭建起来。
 //本例中我们以在本课序言案例中提供下载，唐诗三百首的文本数据为例，截取部分定义 ts 字符串变量如下：

   var ts = '010杜甫：佳人\n绝代有佳人，幽居在空谷。自云良家子，零落依草木。关中昔丧乱，兄弟遭杀戮。官高何足论，不得收骨肉。世情恶衰歇，万事随转烛。夫婿轻薄儿，新人美如玉。合昏尚知时，鸳鸯不独宿。但见新人笑，那闻旧人哭！在山泉水清，出山泉水浊。侍婢卖珠回，牵萝补茅屋。摘花不插发，采柏动盈掬。天寒翠袖薄，日暮倚修竹。\n011杜甫：梦李白二首之一\n死别已吞声，生别常恻恻。江南瘴疠地，逐客无消息。故人入我梦，明我长相忆。君今在罗网，何以有羽翼？恐非平生魂，路远不可测。魂来枫林青，魂返关塞黑。落月满屋梁，犹疑照颜色。水深波浪阔，无使蛟龙得。\n012王维：送别\n下马饮君酒，问君何所之。君言不得意，归卧南山陲。但去莫复闻，白云无尽时。\n' ;

   //这个字符串原于唐诗三百首的文本，本例按原文本文件的格式，再利用专业的代码编辑器展开一些编辑操作，可以把原文本中的换行大部分删除。这个操作或许多数初学者不容易做到，需要理解和会用编辑器的Regular Expression的功能来表达 \n 。手工一一操作的工作量非常大，请初学者把这个操作当作代码基础能力，自行查询资料，加以练习，本文限于篇幅，仅在源码中直接给出字符串常量。
   //但细心分析，上述字符串在诗文标题和诗文结束位置，留下一个\n 字符，分别用来表示诗的标题和本诗结束。
   //前面课程我们已经积累了一些分析字符串的方法，本例我们再按上面字符串变量的需求，对这些方法再总结运用，把功能代码单独包装成为一个个函数，为后面的《唐诗三百首》程序奠定一些基础的代码。
  //下面我们先定义一个分析字符串最基本的函数，search(s , ch) ，利用这个函数，我们可以得到字符ch在字符串s 的索引位置。
   function search( s , ch){
     var i = 0 ;
     while(s[i]){
      if(s[i] === ch){
        return i ;
      }
      i++ ; //忘写本句，代码会陷入死循环
     }
     return -1 ; //字符串每个字符都遍历结束了，没有匹配到ch，则返回 -1 ，不可返回 0 ，因为0是字符串第一个字母的索引。
   }//End search function
  
  $('唐诗标题结束位置：' + search(ts , '\n') ) ;
  $('利用search函数，获取唐诗标题！') ;
  var titleTs = '' ;
  for(var i = 0 ; i < search(ts,'\n') ; i++ ){
    titleTs += ts[i] ;
  }
  $('唐诗标题: ' + titleTs ) ;

 //本例我们再创造一个基本函数，用来返回数组或字符串的长度。
 function lengthOfArray(arr){
   var length = 0 ;
   var i = 0 ;
  while( arr[i] ) {
   length = length + 1 ;
   i = i + 1 ; //忘了这句将让代码陷入恐怖的死循环
   }
  return length ;
 }//End of function lengthOfArray(arr)
 
  $('第一首唐诗标题长度： ' + lengthOfArray(titleTs) ) ;
  $('调用lengthOfArray([1,2,3,"abc"]) ：' + lengthOfArray([1,2,3,'abc']) ) ;
  $('本例ts字符串长度： ' + lengthOfArray(ts) ) ;
 </script>

 </body>
</html>
